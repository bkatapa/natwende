<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				template="/layout/templatePage.xhtml"
				xmlns:p="http://primefaces.org/ui"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui"
				xmlns:c="http://java.sun.com/jsp/jstl/core">

	<h:form id="registerMainForm" styleClass="formBackground">
		<p:panel header="User registration">
				
			<p:wizard flowListener="#{UserAction.onFlowProcess}">
			
				<p:tab id="personal" title="Personal info">
					<p:panel header="Personal Information">
						<p:messages autoUpdate="true" showIcon="true" closable="true"/>
						<p:panelGrid columns="2" layout="grid" columnClasses="label, value">
							<p:outputLabel value="First name: *"/>
							<p:inputText value="#{UserAction.selectedUser.firstname}"/>
							
							<p:outputLabel value="Last name: *"/>
							<p:inputText value="#{UserAction.selectedUser.lastname}"/>
							
							<p:outputLabel value="Email: *"/>
							<p:inputText value="#{UserAction.selectedUser.email}"/>
							
							<p:outputLabel value="Mobile number: *"/>
							<p:inputText value="#{UserAction.selectedUser.contactNumber}"/>
							
							<p:outputLabel value="Password: *"/>
							<p:password value="#{UserAction.selectedUser.passwd}"/>
							 
							<p:outputLabel value="Confirm password: *"/>
							<p:password value="#{UserAction.selectedUser.confirmPasswd}"/>
						</p:panelGrid>
					</p:panel>
				</p:tab>
				
				<c:if test="#{sourcePage eq 'Admin'}">
					<p:tab id="permissions" title="Permissions">
						<p:panel header="Describe permissions">
							<p:messages autoUpdate="true" showIcon="true" closable="true"/>
							<p:panelGrid columns="2" layout="grid">
	        					<p:selectManyCheckbox value="#{UserAction.selectedRoleTypes}"
	        										  layout="grid"
													  columns="1">
									<f:selectItems value="#{UserAction.roleTypes}" />															
								</p:selectManyCheckbox>        					
							</p:panelGrid>
						</p:panel>
					</p:tab>
				</c:if>
					
				<p:tab id="address" title="Address info">
					<p:panel header="Address Information">
						<p:messages autoUpdate="true" showIcon="true" closable="true"/>
						<p:panelGrid columns="2" layout="grid" columnClasses="label, value">
							<p:outputLabel value="Line 1: *"/>
							<p:inputText value="#{UserAction.selectedAddress.line1}"/>
							
							<p:outputLabel value="Street: *"/>
							<p:inputText value="#{UserAction.selectedAddress.street}"/>
							
							<p:outputLabel value="Surbub: *"/>
							<p:inputText value="#{UserAction.selectedAddress.surbub}"/>
							
							<p:outputLabel value="City: *"/>
							<p:inputText value="#{UserAction.selectedAddress.city}"/>
							
							<p:outputLabel value="Province: *"/>
							<p:inputText value="#{UserAction.selectedAddress.province}"/>
							
							<p:outputLabel value="Country: *"/>
							<p:inputText value="#{UserAction.selectedAddress.country}"/>
						</p:panelGrid>
					</p:panel>
				</p:tab>
					
				<p:tab id="confirmation" title="Confirm">
					<p:tabView>
						<p:tab title="Confirm personal information">							
							<p:panelGrid columns="2" layout="grid" columnClasses="label, value">
								<p:outputLabel value="First name: *"/>
								<p:inputText value="#{UserAction.selectedUser.firstname}"/>
								
								<p:outputLabel value="Last name: *"/>
								<p:inputText value="#{UserAction.selectedUser.lastname}"/>
								
								<p:outputLabel value="Email: *"/>
								<p:inputText value="#{UserAction.selectedUser.email}"/>
								
								<p:outputLabel value="Mobile number: *"/>
								<p:inputText value="#{UserAction.selectedUser.contactNumber}"/>
							</p:panelGrid>
						</p:tab>
						<p:tab title="Confirm user permissions">
							<ui:repeat var="roleType" value="#{UserAction.selectedRoleTypes}">							
								<p:toolbar style="border: none; margin-bottom: 2px;">
									<p:outputLabel value="#{roleType.description}"/>
								</p:toolbar>
							</ui:repeat>
						</p:tab>
						<p:tab title="Confirm address">							
							<p:panelGrid columns="2" layout="grid" columnClasses="label, value">
								<p:outputLabel value="Line 1: *"/>
								<p:inputText value="#{UserAction.selectedAddress.line1}"/>
								
								<p:outputLabel value="Street: *"/>
								<p:inputText value="#{UserAction.selectedAddress.street}"/>
								
								<p:outputLabel value="Surbub: *"/>
								<p:inputText value="#{UserAction.selectedAddress.surbub}"/>
								
								<p:outputLabel value="City: *"/>
								<p:inputText value="#{UserAction.selectedAddress.city}"/>
								
								<p:outputLabel value="Province: *"/>
								<p:password value="#{UserAction.selectedAddress.province}"/>
								
								<p:outputLabel value="Country: *"/>
								<p:password value="#{UserAction.selectedAddress.country}"/>
							</p:panelGrid>
						</p:tab>
					</p:tabView>
					
					<p:commandLink action="#{UserAction.register}" ajax="false" id="register-btn" style="float: right;">
						<p:graphicImage name="images/register-green.png" width="180" height="50"/>
					</p:commandLink>
					
				</p:tab>
			
			</p:wizard>
								
		</p:panel>
	</h:form>
	
	<style>
   		.v-align-top td {
   			vertical-align: top;
		}
   	</style>
		
</ui:composition>