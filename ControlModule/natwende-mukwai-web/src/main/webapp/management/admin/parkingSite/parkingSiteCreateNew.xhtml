<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/layout/mainTemplate.xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<ui:define name="content">
        <p:messages id="messages" severity="error" />
        <h:form styleClass="formBackground">
            <p:breadCrumb>
                <p:menuitem value="Home" action="Home" />
                <p:menuitem value="Parking Site List" action="ParkingSiteList" />
                <p:menuitem value="Create New Parking Site"/>
            </p:breadCrumb>
        </h:form>
        <h:form id="createNewSiteForm">
        	<p:panel header="Create New Site" id="create-new-site" widgetVar="var_CreateNewSite">
				<h:panelGrid columns="3">
					<p:fieldset legend="Site Details" style="height: 220px;">
						<p:panelGrid columns="2" columnClasses="columnHeader, columnNormal" style="border: 0px;">
							<h:outputLabel for="input-site-name" value="Name:" />
							<p:inputText id="input-site-name" value="#{ParkingSiteEditAction.siteVO.siteName}" 
								 	required="true" requiredMessage="Site name is missing"/>					
					
							<h:outputLabel for="input-site-gpsCoordinates" value="GPS Coordinates:" />
							<p:inputText id="input-site-gpsCoordinates" required="true" requiredMessage="Site GPS Coordinates are missing"
								 	value="#{ParkingSiteEditAction.siteVO.gpsCoordinates}" />					
					
							<h:outputLabel for="input-no-of-bays" value="No. of parking bays:" />
							<p:spinner id="input-no-of-bays" value="#{ParkingSiteEditAction.siteVO.numberOfBays}" 
							   		size="10" required="true" requiredMessage="Number of parking bays is required"
							   		min="0"/>					
						</p:panelGrid>							
					</p:fieldset>
					<p:fieldset legend="Site Address" style="height: 220px;">
						<p:panelGrid columns="2" columnClasses="columnHeader, columnNormal">
							<h:outputLabel value="Line 1:" for="addr-line1"/>
							<p:inputText id="addr-line1" value="#{ParkingSiteEditAction.siteAddressVO.line1}" />					

							<h:outputLabel value="City:" for="addr-city"/>
							<p:inputText id="addr-city" value="#{ParkingSiteEditAction.siteAddressVO.city}" 
							 			required="true" requiredMessage="City is missing"/>					

							<h:outputLabel value="Postal Code:" for="addr-postal"/>
							<p:inputText id="addr-postal" value="#{ParkingSiteEditAction.siteAddressVO.postalCode}" 
							 			required="true" requiredMessage="Postal Code is missing"/>					

							<h:outputLabel value="Province:" for="addr-province"/>
							<p:inputText id="addr-province" value="#{ParkingSiteEditAction.siteAddressVO.province}" 
							 			required="true" requiredMessage="Province is missing"/>					

							<h:outputLabel value="Country:" for="addr-country"/>
							<p:inputText id="addr-country" value="#{ParkingSiteEditAction.siteAddressVO.country}" 
							 			required="true" requiredMessage="Country is missing"/>					
						</p:panelGrid>
					</p:fieldset>
					<p:fieldset legend="Manager Details" style="height: 220px;">
						<p:panelGrid columns="2" columnClasses="columnHeader, columnNormal">
							<h:outputLabel for="parkingSite-manager" value="Manager:" />
							<p:inputText id="parkingSite-manager"
								 		value="#{ParkingSiteEditAction.siteVO.manager}"
								 		required="true" requiredMessage="Manager name is missing"/>						

							<h:outputLabel for="parkingSite-telephone" value="Phone No:" />
							<p:inputText id="parkingSite-telephone"
								 		value="#{ParkingSiteEditAction.siteVO.managerContactNumber}" 
								 		required="true" requiredMessage="Phone number is missing"/>						

							<h:outputLabel for="parkingSite-managerEmail" value="Email:" />
							<p:inputText id="parkingSite-managerEmail"
								 		value="#{ParkingSiteEditAction.siteVO.managerEmail}" 
								 		required="true" requiredMessage="Manager email is missing"/>						

							<h:outputLabel for="parkingSite-managerOfficeEmail"
								   		value="Email Office:" />
							<p:inputText id="parkingSite-managerOfficeEmail"
								 		value="#{ParkingSiteEditAction.siteVO.parkingOfficeEmail}"
								 		required="true" requiredMessage="Office email is missing"/>						
						</p:panelGrid>					
					</p:fieldset>
				</h:panelGrid>				

				<p:toolbar style="margin-top: 10px;">
					<f:facet name="left">
						<p:panelGrid columns="2">
							<p:commandButton id="close-btn" 
								ajax="true" 
								value="Back"
								process="@this"								
								styleClass="button" icon="ui-icon-arrow-1-w"								
								action="#{ParkingSiteEditAction.cancelEdit()}" />
							<p:commandButton id="save-site" ajax="true" value="Save"
								process="@(form)" 
								update="@widgetVar(var_ParkingSiteTable) messages"				
								styleClass="button" 
								icon="ui-icon-disk"
								action="#{ParkingSiteEditAction.saveParkingSite('CREATE')}"/>
						</p:panelGrid>			
					</f:facet>
				</p:toolbar>
			</p:panel>
		</h:form>
		
	</ui:define>

</ui:composition>